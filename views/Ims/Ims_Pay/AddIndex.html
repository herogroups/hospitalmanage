 
<form id="dform" class="form-horizontal">
    <div class="ibox">
        <div class="ibox-title">
            <h5> 公众号支付记录 新增</h5>

        </div>
        <div class="ibox-content">
            <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="openId"> <i class=" text-danger">* </i> 用户号:</label>
                            <div class="col-sm-8">
                             
  <input id='openId' name='openId' placeholder='请输入用户号' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="hosCardNo"> <i class=" text-danger">* </i> 就诊卡号:</label>
                            <div class="col-sm-8">
                             
  <input id='hosCardNo' name='hosCardNo' placeholder='请输入就诊卡号' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="orderCode"> <i class=" text-danger">* </i> 订单号:</label>
                            <div class="col-sm-8">
                             
  <input id='orderCode' name='orderCode' readonly placeholder='请输入订单号' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="amount"> <i class=" text-danger">* </i> 支付金额:</label>
                            <div class="col-sm-8">
                             
  <input type='number' step='0.01'  id='amount' name='amount' placeholder='请输入支付金额' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="busCode"> <i class=" text-danger">* </i> 业务类型:</label>
                            <div class="col-sm-8">
                             
  <input id='busCode' name='busCode' readonly placeholder='请输入业务类型' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label" for="payResultCh"> <i class=" text-danger">* </i> 支付结果中文:</label>
                            <div class="col-sm-8">
                             
  <input id='payResultCh' name='payResultCh' placeholder='请输入支付结果中文' required class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                              <label class="col-sm-4 control-label" for="payResult">支付结果 :</label>
                            <div class="col-sm-8">
                             
  <input id='payResult' name='payResult' placeholder='请输入支付结果'  class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                              <label class="col-sm-4 control-label" for="receiptNo">Hos回票据号 :</label>
                            <div class="col-sm-8">
                             
  <input id='receiptNo' name='receiptNo' placeholder='请输入Hos回票据号'  class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                              <label class="col-sm-4 control-label" for="payInfo">支付信息 银行或微信支付结果返回 :</label>
                            <div class="col-sm-8">
                             
  <input id='payInfo' name='payInfo' placeholder='请输入支付信息 银行或微信支付结果返回'  class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                              <label class="col-sm-4 control-label" for="payMode">支付方式 :</label>
                            <div class="col-sm-8">
                             
  <input id='payMode' name='payMode' placeholder='请输入支付方式'  class='form-control'>                             </div>
                        </div>
                    </div>       
                    <div class="col-md-6">
                        <div class="form-group">
                              <label class="col-sm-4 control-label" for=" createDate">支付时间 :</label>
                            <div class="col-sm-8">
                             
  <input id=' createDate' name=' createDate' placeholder='请输入支付时间'  class='form-control'>                             </div>
                        </div>
                    </div>       
            </div>

        </div>
    </div>
</form>




<script>
    $(function () { 
		let data = parent.$('#tb_grid').bootstrapTable('getData');
		 $('#orderCode').val( util.autocode(data, 'orderCode',2));
		let data = parent.$('#tb_grid').bootstrapTable('getData');
		 $('#busCode').val( util.autocode(data, 'busCode',2));

    });

    function initValidator() {
        $('#dform').bootstrapValidator({
            message: 'This value is not valid',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {  
//用户号
		                  openId :{
                     message: '用户号 验证失败',
                     validators: {
                         notEmpty: {
                             message: '用户号 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 用户号 长度在1到60之间'
                           }
                       }
                   },
//就诊卡号
		                  hosCardNo :{
                     message: '就诊卡号 验证失败',
                     validators: {
                         notEmpty: {
                             message: '就诊卡号 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 就诊卡号 长度在1到60之间'
                           }
                       }
                   },
//订单号
		                  orderCode :{
                     message: '订单号 验证失败',
                     validators: {
                         notEmpty: {
                             message: '订单号 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 订单号 长度在1到60之间'
                           }
                       }
                   },
//支付金额
		                  amount :{
                     message: '支付金额 验证失败',
                     validators: {
                         notEmpty: {
                             message: '支付金额 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 支付金额 长度在1到60之间'
                           }
                       }
                   },
//业务类型
		                  busCode :{
                     message: '业务类型 验证失败',
                     validators: {
                         notEmpty: {
                             message: '业务类型 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 业务类型 长度在1到60之间'
                           }
                       }
                   },
//支付结果中文
		                  payResultCh :{
                     message: '支付结果中文 验证失败',
                     validators: {
                         notEmpty: {
                             message: '支付结果中文 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message:' 支付结果中文 长度在1到60之间'
                           }
                       }
                   },
        }

        });
    }


    function submit() {
        initValidator();
        $('#dform').data('bootstrapValidator').validate();
        if (!$('#dform').data('bootstrapValidator').isValid()) {
            return false;
        }
        var action = $("#dform").attr("action"); 
        var params = new FormData($("#dform")[0]);
        var option = {
            postUrl: action,
            message: '确定要保存数据吗？',
            param: params,
            successCallBack: function (data) { //添加成功
                var index = parent.layer.getFrameIndex(window.name);
                parent.tableRefresh();
                parent.layer.close(index);

            },
            errorCallBack: null
        };
        bstrap.confirm(option); //弹出提示确认框
    }

</script>

