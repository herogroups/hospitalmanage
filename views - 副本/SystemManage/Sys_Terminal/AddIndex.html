 <form id="dform" class="form-horizontal">
     <div class="ibox">
         <div class="ibox-title">
             <h5>终端设备表 新增</h5>

         </div>
         <div class="ibox-content">
             <div class="row">
               
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="SHOPID"><i class=" text-danger">* </i>部门名称:</label>
                         <div class="col-sm-8">

                             <select id='SHOPID' name='SHOPID' required class='form-control'></select>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="APPSOFTID"><i class=" text-danger">*
                             </i>应用程序类型:</label>
                         <div class="col-sm-8">

                             <select id='APPSOFTID' name='APPSOFTID' required class='form-control'></select>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="ADVSOFTID"><i class=" text-danger">*
                            </i>轮播图类型:</label>
                        <div class="col-sm-8">

                            <select id='ADVSOFTID' name='ADVSOFTID' required class='form-control'></select>
                        </div>
                    </div>
                </div>
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="TERMINALMODEID"><i class=" text-danger">*
                             </i>终端型号:</label>
                         <div class="col-sm-8">

                             <select id='TERMINALMODEID' name='TERMINALMODEID' required class='form-control'></select>
                         </div>
                     </div>
                 </div>


                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="TERMINALCODE"><i class=" text-danger">* </i>设备编号
                             :</label>
                         <div class="col-sm-8">

                             <input id='TERMINALCODE' name='TERMINALCODE' placeholder='请输入设备编号 ' required
                                 class='form-control'>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="TERMINALNAME"><i class=" text-danger">* </i>设备名称
                             :</label>
                         <div class="col-sm-8">

                             <input id='TERMINALNAME' name='TERMINALNAME' placeholder='请输入设备名称 ' required
                                 class='form-control'>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="BANKTERCODE"><i class=" text-danger">* </i>银行终端号 :</label>
                        <div class="col-sm-8">

                            <input id='BANKTERCODE' name='BANKTERCODE' placeholder='请输入银行终端号' required class='form-control'>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="BANKMERCODE"><i class=" text-danger">* </i>银行商户号 :</label>
                        <div class="col-sm-8">

                            <input id='BANKMERCODE' name='BANKMERCODE' placeholder='请输入银行商户号' required class='form-control'>
                        </div>
                    </div>
                </div>

                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="IPAddr">IP地址 :</label>
                         <div class="col-sm-8">

                             <input id='IPAddr' name='IPAddr' placeholder='请输入IP地址' class='form-control'>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="ADDRESS">安装地址 :</label>
                         <div class="col-sm-8">

                             <input id='ADDRESS' name='ADDRESS' placeholder='请输入安装地址 ' class='form-control'>
                         </div>
                     </div>
                 </div>

             

                
                 <div class="col-md-6">
                     <div class="form-group">
                         <label class="col-sm-4 control-label" for="HARDWARECODE">硬件编号 :</label>
                         <div class="col-sm-8">

                             <input id='HARDWARECODE' name='HARDWARECODE' placeholder='请输入硬件编号 ' class='form-control'>
                         </div>
                     </div>
                 </div>

             </div>

         </div>
     </div>
 </form>




 <script>
     $(function () {
         $('#SHOPID').selectBind('/SystemManage/sys_shop/GetComb');
         $('#APPSOFTID').selectBind('/SystemManage/sys_soft/GetComb', {
            FILEPACKAGETYPE: 0
        });
        $('#ADVSOFTID').selectBind('/SystemManage/sys_soft/GetComb', {
            FILEPACKAGETYPE: 1
        });
         
         $('#TERMINALMODEID').selectBind('/SystemManage/sys_terminalmode/GetComb');

         $('#DOCMD').selectBind('/SystemManage/sys_cmd/GetComb');
         let data = parent.$('#tb_grid').bootstrapTable('getData');
         $('#TERMINALCODE').val(util.autocode(data, 'TERMINALCODE', 6));

  

     });

     function initValidator() {
         $('#dform').bootstrapValidator({
             message: 'This value is not valid',
             feedbackIcons: {
                 valid: 'glyphicon glyphicon-ok',
                 invalid: 'glyphicon glyphicon-remove',
                 validating: 'glyphicon glyphicon-refresh'
             },
             fields: {
                 //部门名称
                 SHOPID: {
                     message: '部门名称 验证失败',
                     validators: {
                         notEmpty: {
                             message: '部门名称 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 部门名称 长度在1到60之间'
                         }
                     }
                 },
                 //所属软件
                 APPSOFTID: {
                     message: '所属软件 验证失败',
                     validators: {
                         notEmpty: {
                             message: '所属软件 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 所属软件 长度在1到60之间'
                         }
                     }
                 },
                 //终端型号
                 TERMINALMODEID: {
                     message: '终端型号 验证失败',
                     validators: {
                         notEmpty: {
                             message: '终端型号 不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 终端型号 长度在1到60之间'
                         }
                     }
                 },

                 //发送命令 
                 DOCMD: {
                     message: '发送命令  验证失败',
                     validators: {
                         notEmpty: {
                             message: '发送命令  不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 发送命令  长度在1到60之间'
                         }
                     }
                 },
                 //设备编号 
                 TERMINALCODE: {
                     message: '设备编号  验证失败',
                     validators: {
                         notEmpty: {
                             message: '设备编号  不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 设备编号  长度在1到60之间'
                         }
                     }
                 },
                 //设备名称 
                 TERMINALNAME: {
                     message: '设备名称  验证失败',
                     validators: {
                         notEmpty: {
                             message: '设备名称  不能为空'
                         },
                         stringLength: {
                             min: 1,
                             max: 60,
                             message: ' 设备名称  长度在1到60之间'
                         }
                     }
                 },

             }

         });
     }


     function Submit() {
         initValidator();
         $('#dform').data('bootstrapValidator').validate();
         if (!$('#dform').data('bootstrapValidator').isValid()) {
             return false;
         }
         var action = $("#dform").attr("action");
         var params = new FormData($("#dform")[0]);
         var option = {
             postUrl: action,
             message: '确定要保存数据吗？',
             param: params,
             successCallBack: function (data) { //添加成功
                 var index = parent.layer.getFrameIndex(window.name);
                 parent.tableRefresh();
                 parent.layer.close(index);

             },
             errorCallBack: null
         };
         bstrap.confirm(option); //弹出提示确认框
     }
 </script>